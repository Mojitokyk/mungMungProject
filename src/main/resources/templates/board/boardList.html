<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>커뮤니티 리스트</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="../css/noticeList.css">

</head>
<body>
	<th:block th:include="common/mung_header"></th:block>
		<div class="color-head">
			<h1>커뮤니티</h1>
		</div>
	<div class="page-content">
		<div class="page-content-top">
			<div>
				<a href="/board/writeFrm" th:if="${session.m != null}" class="btn bc1">글쓰기</a>
			</div>
			<div>
	            <form action="/board/searchBoardList" method="get" id="formsearch">
		            <input type="hidden" name="reqPage" id="reqPage">
		            <select name="searchType" class="sel-search">
		                <option value="title">제목</option>
		                <option value="writer">작성자</option>
		                <option value="content">내용</option>
		            </select>
	            <input type="text" class="input-form1" name="searchName" id="sch1" placeholder="검색어를 입력해주세요.">
	            <button id="searchBtn" class="btn bc1">검색</button>
	            </form>
            </div>
        </div>
       <div class="page-content-mid">
	        <div class="boardlist">
				<ul th:each="board : ${boardList}">
					<li class="board">
	                     <a th:href="@{/board/view(boardNo=${board.boardNo})}">
	                        <div class="img-box">
	                            <img th:src="'/boardmain/'+${board.boardFilepath}" style="width: 250px; height: 250px">
	                        </div>
	                        <div>
	                            <h3 th:text="${board.boardTitle}"></h3>
	                            <span th:text="${board.memberId}"></span>
	                            <span>|</span>
	                            <span th:text="${board.boardWriteDate}" style="color: #aaa"></span>
	                        </div>
	                     </a>
	                 </li>
				</ul>
			</div>
		</div>
		 <div class="page-content-bottom">
            <div id="pageNavi" th:utext="${pageNavi}"></div>
        </div>
	</div>
	<th:block th:include="common/mung_footer"></th:block>
	<script>

	$("#tableview #trview").on("click", function(){
		const view = ($(this).children().eq(0).text());
		$(location).attr("href","/board/view?boardNo="+view);
	})
	
	/*
	
		$("#more-btn").on("click",function(){
			const start =$(this).val();
			const amount =4;
			const end = Number(start)+amount-1;
			$.ajax({
				url : "/board/more",
				type : "post",
				data : {start:start,end:end},
				success : function(data){
					for(let i=0;i<data.length;i++){
						const board = data[i];					
						const div = $("<table>");
						div.addClass("posting-item");	
						
						const imgDiv = $("<div>");
						imgDiv.addClass("posting-img");
						
						const atab = $("<a>");
						atab.attr("href","/board/view?boardNo="+board.boardNo);
						
						const img = $("<img>");
						img.attr("src","/boardmain/"+board.boardFilepath);
						atab.append(img);
						imgDiv.append(atab);
						
						const contentDiv = $("<div>");
						contentDiv.addClass("posting-contentDiv");
						
						const title =$("<p>");
						title.text(board.boardTitle);
						contentDiv.append(title);
		
						div.append(imgDiv).append(contentDiv);
						$(".boardWrapper").append(div);
					
					}
					const currentVal =Number($("#more-btn").val());
					$("#more-btn").val(currentVal+amount);
					const currentCount = Number($("#more-btn").attr("currentCount"));
					const changeCount = currentCount+data.length;
					$("#more-btn").attr("currentCount",changeCount);	
					const totalCount = Number($("#more-btn").attr("totalCount"));
					if(totalCount == changeCount){
						$("#more-btn").remove();
					}		
				}		
			})
		});
		
		
		$("#more-btn").click();
		
	*/	
		$("#searchBtn").on("click",function(){
			$("#reqPage").val(1);
			if($("#sch1").val()==""){
			      alert("검색어를 입력해주세요.");
			      return false;
			   }
		});
	</script>
</body>
</html>